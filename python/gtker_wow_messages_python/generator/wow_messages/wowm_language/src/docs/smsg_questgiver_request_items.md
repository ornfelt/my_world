# SMSG_QUESTGIVER_REQUEST_ITEMS

## Client Version 1

mangoszero/vmangos: Quests that don't require items use the `RequestItemsText` field to store the text that is shown when you talk to the quest giver while the quest is incomplete. Therefore the text should not be shown for them when the quest is complete. For quests that do require items, it is self explanatory.

### Wowm Representation

Autogenerated from `wowm` file at [`wow_message_parser/wowm/world/quest/smsg_questgiver_request_item.wowm:17`](https://github.com/gtker/wow_messages/tree/main/wow_message_parser/wowm/world/quest/smsg_questgiver_request_item.wowm#L17).
```rust,ignore
smsg SMSG_QUESTGIVER_REQUEST_ITEMS = 0x018B {
    Guid npc;
    u32 quest_id;
    CString title;
    CString request_items_text;
    u32 emote_delay;
    u32 emote;
    Bool32 auto_finish;
    Gold required_money;
    u32 amount_of_required_items;
    QuestItemRequirement[amount_of_required_items] required_items;
    u32 unknown1;
    QuestCompletable completable;
    u32 flags2;
    u32 flags3;
}
```
### Header

SMSG have a header of 4 bytes.

#### SMSG Header

| Offset | Size / Endianness | Type   | Name   | Description |
| ------ | ----------------- | ------ | ------ | ----------- |
| 0x00   | 2 / Big           | uint16 | size   | Size of the rest of the message including the opcode field but not including the size field.|
| 0x02   | 2 / Little        | uint16 | opcode | Opcode that determines which fields the message contains.|

### Body

| Offset | Size / Endianness | Type | Name | Comment |
| ------ | ----------------- | ---- | ---- | ------- |
| 0x04 | 8 / Little | [Guid](../types/packed-guid.md) | npc |  |
| 0x0C | 4 / Little | u32 | quest_id |  |
| 0x10 | - / - | CString | title |  |
| - | - / - | CString | request_items_text |  |
| - | 4 / Little | u32 | emote_delay |  |
| - | 4 / Little | u32 | emote |  |
| - | 4 / Little | Bool32 | auto_finish |  |
| - | 4 / Little | Gold | required_money |  |
| - | 4 / Little | u32 | amount_of_required_items |  |
| - | ? / - | [QuestItemRequirement](questitemrequirement.md)[amount_of_required_items] | required_items |  |
| - | 4 / Little | u32 | unknown1 | cmangos/vmangos/mangoszero: All emulators set to 0x02 |
| - | 4 / - | [QuestCompletable](questcompletable.md) | completable |  |
| - | 4 / Little | u32 | flags2 | cmangos/vmangos/mangoszero: set to 0x04 |
| - | 4 / Little | u32 | flags3 | cmangos/vmangos/mangoszero: set to 0x08 |

## Client Version 2.4.3

mangoszero/vmangos: Quests that don't require items use the `RequestItemsText` field to store the text that is shown when you talk to the quest giver while the quest is incomplete. Therefore the text should not be shown for them when the quest is complete. For quests that do require items, it is self explanatory.

### Wowm Representation

Autogenerated from `wowm` file at [`wow_message_parser/wowm/world/quest/smsg_questgiver_request_item.wowm:40`](https://github.com/gtker/wow_messages/tree/main/wow_message_parser/wowm/world/quest/smsg_questgiver_request_item.wowm#L40).
```rust,ignore
smsg SMSG_QUESTGIVER_REQUEST_ITEMS = 0x018B {
    Guid npc;
    u32 quest_id;
    CString title;
    CString request_items_text;
    u32 emote_delay;
    u32 emote;
    Bool32 auto_finish;
    u32 suggested_players;
    Gold required_money;
    u32 amount_of_required_items;
    QuestItemRequirement[amount_of_required_items] required_items;
    QuestCompletable completable;
    u32 flags1;
    u32 flags2;
    u32 flags3;
}
```
### Header

SMSG have a header of 4 bytes.

#### SMSG Header

| Offset | Size / Endianness | Type   | Name   | Description |
| ------ | ----------------- | ------ | ------ | ----------- |
| 0x00   | 2 / Big           | uint16 | size   | Size of the rest of the message including the opcode field but not including the size field.|
| 0x02   | 2 / Little        | uint16 | opcode | Opcode that determines which fields the message contains.|

### Body

| Offset | Size / Endianness | Type | Name | Comment |
| ------ | ----------------- | ---- | ---- | ------- |
| 0x04 | 8 / Little | [Guid](../types/packed-guid.md) | npc |  |
| 0x0C | 4 / Little | u32 | quest_id |  |
| 0x10 | - / - | CString | title |  |
| - | - / - | CString | request_items_text |  |
| - | 4 / Little | u32 | emote_delay |  |
| - | 4 / Little | u32 | emote |  |
| - | 4 / Little | Bool32 | auto_finish |  |
| - | 4 / Little | u32 | suggested_players |  |
| - | 4 / Little | Gold | required_money |  |
| - | 4 / Little | u32 | amount_of_required_items |  |
| - | ? / - | [QuestItemRequirement](questitemrequirement.md)[amount_of_required_items] | required_items |  |
| - | 4 / - | [QuestCompletable](questcompletable.md) | completable |  |
| - | 4 / Little | u32 | flags1 | cmangos/vmangos/mangoszero: set to 0x04 |
| - | 4 / Little | u32 | flags2 | cmangos/vmangos/mangoszero: set to 0x08 |
| - | 4 / Little | u32 | flags3 | cmangos/vmangos/mangoszero: set to 0x10 |

## Client Version 3.3.5

mangoszero/vmangos: Quests that don't require items use the `RequestItemsText` field to store the text that is shown when you talk to the quest giver while the quest is incomplete. Therefore the text should not be shown for them when the quest is complete. For quests that do require items, it is self explanatory.

### Wowm Representation

Autogenerated from `wowm` file at [`wow_message_parser/wowm/world/quest/smsg_questgiver_request_item.wowm:64`](https://github.com/gtker/wow_messages/tree/main/wow_message_parser/wowm/world/quest/smsg_questgiver_request_item.wowm#L64).
```rust,ignore
smsg SMSG_QUESTGIVER_REQUEST_ITEMS = 0x018B {
    Guid npc;
    u32 quest_id;
    CString title;
    CString request_items_text;
    u32 emote_delay;
    u32 emote;
    Bool32 auto_finish;
    u32 flags1;
    u32 suggested_players;
    Gold required_money;
    u32 amount_of_required_items;
    QuestItemRequirement[amount_of_required_items] required_items;
    QuestCompletable completable;
    u32 flags2;
    u32 flags3;
    u32 flags4;
}
```
### Header

SMSG have a header of 4 bytes.

#### SMSG Header

| Offset | Size / Endianness | Type   | Name   | Description |
| ------ | ----------------- | ------ | ------ | ----------- |
| 0x00   | 2 **OR** 3 / Big           | uint16 **OR** uint16+uint8 | size | Size of the rest of the message including the opcode field but not including the size field. Wrath server messages **can** be 3 bytes. If the first (most significant) size byte has `0x80` set, the header will be 3 bytes, otherwise it is 2.|
| -      | 2 / Little| uint16 | opcode | Opcode that determines which fields the message contains. |

### Body

| Offset | Size / Endianness | Type | Name | Comment |
| ------ | ----------------- | ---- | ---- | ------- |
| - | 8 / Little | [Guid](../types/packed-guid.md) | npc |  |
| - | 4 / Little | u32 | quest_id |  |
| - | - / - | CString | title |  |
| - | - / - | CString | request_items_text |  |
| - | 4 / Little | u32 | emote_delay |  |
| - | 4 / Little | u32 | emote |  |
| - | 4 / Little | Bool32 | auto_finish |  |
| - | 4 / Little | u32 | flags1 | mangostwo: 3.3.3 questFlags |
| - | 4 / Little | u32 | suggested_players |  |
| - | 4 / Little | Gold | required_money |  |
| - | 4 / Little | u32 | amount_of_required_items |  |
| - | ? / - | [QuestItemRequirement](questitemrequirement.md)[amount_of_required_items] | required_items |  |
| - | 4 / - | [QuestCompletable](questcompletable.md) | completable |  |
| - | 4 / Little | u32 | flags2 | mangostwo: set to 0x04 |
| - | 4 / Little | u32 | flags3 | mangostwo: set to 0x08 |
| - | 4 / Little | u32 | flags4 | mangostwo: set to 0x10 |

